include ../mixins/main

-
  util.expected = [
    '<p>',
    '<ul>',    
      '<li>first</li>',
      '<li>second</li>',
      '<li>third</li>',
      '<li>fourth</li>',
      '<li>first</li>',
      '<li>second</li>',
    '</ul>',
    '<ul>',    
      '<li>first</li>',
      '<li>second</li>',
      '<li>first</li>',
      '<li>second</li>',
    '</ul>',
    '<ul>',    
      '<li>first</li>',
      '<li>first</li>',
      '<li>first</li>',
    '</ul>',
    '</p>'
  ].join('');

mixin syno_basic
  synz 'sequence'
    syn
      | first
    syn
      | second
    syn
      | third
    syn
      | fourth

mixin syno_with_holes(params)
  synz 'sequence'
    syn
      | first
    syn
      if true==false
        | no
    syn
      if true==false
        | no
    syn
      if !hasFlag(params, 'EXCLUDE_SECOND')
        | second


-
p
  ul
    for i in [1,2,3,4,5,6]
      li #[+syno_basic]
  ul
    for i in [1,2,3,4]
      li #[+syno_with_holes]
  ul
    for i in [1,2,3]
      li #[+syno_with_holes({'EXCLUDE_SECOND': true})]
